# Puente Impresión Campomar

Puente Impresión Campomar is a desktop application built with **Electron** that acts as a bridge between a web application and a thermal ticket printer. It creates a local server, exposes it to the internet using **Ngrok**, and allows receiving print orders from a public URL.

## About The Project

This project was developed to solve the need for printing sales receipts or orders from a web application (like a point of sale or an e-commerce site) directly to a thermal printer connected to a local network. The application provides a secure and stable public endpoint through Ngrok, so your web application can send print jobs from anywhere.

### Built With

* [Electron](https://www.electronjs.org/)
* [Express.js](https://expressjs.com/)
* [Ngrok](https://ngrok.com/)
* [Node-Thermal-Printer](https://github.com/Klemen1337/node-thermal-printer)

## Features

* **Local Print Server**: Runs an Express server to receive print requests.
* **Ngrok Tunneling**: Automatically creates a public URL with Ngrok to receive requests from the internet.
* **Simple User Interface**: Shows the status of the server, printer, and the public URL.
* **Secure Configuration**: Protects the configuration section with a password.
* **Persistent Configuration**: Saves the printer's IP address and the Ngrok token locally.

## Getting Started

To get a local copy up and running, follow these simple steps.

### Prerequisites

You need to have Node.js and npm installed on your system.
* npm
    ```sh
    npm install npm@latest -g
    ```

### Installation

1.  Clone the repository:
    ```sh
    git clone [https://github.com/your_username/AppPuenteCampoMar.git](https://github.com/your_username/AppPuenteCampoMar.git)
    ```
2.  Navigate to the project directory:
    ```sh
    cd AppPuenteCampoMar
    ```
3.  Install NPM packages:
    ```sh
    npm install
    ```
    
## Configuration

Before running the application, you need to set up your environment variables.

1.  Create a `.env` file in the root of the project. This file is ignored by Git, so your sensitive data will remain private.
    ```
    touch .env
    ```

2.  Add the following variables to your `.env` file. These will be used as default values if they are not configured in the application's UI:
    ```env
    # The IP address of your thermal printer on the local network
    PRINTER_IP=192.168.1.100

    # Your Ngrok authentication token (get it from [https://dashboard.ngrok.com/get-started/your-authtoken](https://dashboard.ngrok.com/get-started/your-authtoken))
    NGROK_TOKEN=your_ngrok_auth_token_here

    # A secret password to unlock the configuration section in the app
    SECRET_PASSWORD=your_secret_password
    ```

    **Note:** You can also set the Printer IP and Ngrok Token directly in the application's UI after unlocking the configuration section.

## Usage

To run the application in development mode, use the following command:

```sh
npm start
```
This will launch the Electron application. The main window will show you the status of the local server and the public URL generated by Ngrok that you can use in your web application to send print requests.

To send a print job, make a POST request to the /print endpoint of your public Ngrok URL with a JSON body like this:

```sh
{
  "orderDetails": "Your ticket content here."
}
```
## Contributing

Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make are greatly appreciated.

If you have a suggestion that would make this better, please fork the repo and create a pull request. You can also simply open an issue with the tag "enhancement".

  1. Fork the Project

  2. Create your Feature Branch `(git checkout -b feature/AmazingFeature)`

  3. Commit your Changes `(git commit -m 'Add some AmazingFeature')`

  4. Push to the Branch `(git push origin feature/AmazingFeature)`

  5. Open a Pull Request

## License
  Distributed under the ISC License. See `LICENSE` for more information.
